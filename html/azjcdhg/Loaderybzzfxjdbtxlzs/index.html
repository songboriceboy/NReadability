<!DOCTYPE html>

<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="android,ios" />
        <meta name="keywords" content="android,ios" />

        <title>Jack_King007的专栏</title>
        <style type='text/css'>
            body {
                background-color: #CCC;
            }
        </style>
        <link rel="stylesheet" href="../../../css/bootstrap.css" />
    </head>

    <body>
        <div class="container">

            <h1>Jack_King007的专栏</h1>

            <div class='navbar navbar-inverse'>
                <div class='navbar-inner nav-collapse' style="height: auto;">
                    <ul class="nav">
                              				<li><a href="http://songboriceboy.github.io/NReadability/html/androiddmyh/index.html">android代码优化</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/appkfzwgnsl/index.html">app开发之我给你思路</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/javajcjq/index.html">java基础加强</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/ypwzjnzjlsjytjsd/index.html">一片文章就能在简历上加一条技术点</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azzjsgl/index.html">安卓之技术归类</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/index.html">安卓基础的回顾</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azksrmlsxxmxl/index.html">安卓快速入门——练手小项目系列</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azwlbc/index.html">安卓网络编程</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/kskf/index.html">快速开发</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/wfl/index.html">未分类</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/gfzmAPPkfl/index.html">高仿著名APP开发类</a></li>
    				                      </ul>
                </div>
            </div>

            <div id='content' class='row-fluid'>

                <div class='span9 main'>
				<div style="color:blue" align=center>Loader异步装载复习——简答版通讯录助手</div><br><div id="article_content" class="article_content">

<p><span style="font-size:18px">Loader 中文名是装载器</span>，<span style="font-size:18px">为毛叫这个名，老师讲那么久，我都不知道有啥用，看了API 才懂了那么一丢丢，真难，我在后面再说下吧</span>。</p>
<p><span style="font-size:18px">装载器—字面意思 装 东西 ，载 还是装东西，器 想着肯定封装了东西的。</span>&nbsp;</p>
<p><br>
</p>
<p><span style="font-size:18px">好啦不瞎想了 猜猜有助于记忆而已</span>，看看谷歌官方怎么说的................</p>
<p><br>
</p>
<p>
<p lang="zh-CN" style="margin-top:0px; margin-bottom:0cm; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span style="font-family:微软雅黑,sans-serif">装载器从</span><span style="font-family:微软雅黑,sans-serif">android3.0</span><span style="font-family:微软雅黑,sans-serif">开始引进。它使得在</span><span style="font-family:微软雅黑,sans-serif">activity</span><span style="font-family:微软雅黑,sans-serif">或</span><span style="font-family:微软雅黑,sans-serif">fragment</span><span style="font-family:微软雅黑,sans-serif">中异步加载数据变得简单。装载器具有如下特性：</span></p>
<p lang="zh-CN" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span style="font-family:微软雅黑,sans-serif"><strong></strong></span></p>
<ul style="font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-family:微软雅黑,sans-serif">它们对每个</span><span style="font-family:微软雅黑,sans-serif">Activity</span><span style="font-family:微软雅黑,sans-serif">和</span><span style="font-family:微软雅黑,sans-serif">Fragment</span><span style="font-family:微软雅黑,sans-serif">都有效。</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-family:微软雅黑,sans-serif">他们提供了异步加载数据的能力。</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-family:微软雅黑,sans-serif">它们监视数据源的一举一动并在内容改变时传送新的结果。</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<font face="微软雅黑,sans-serif">当由于配置改变而被重新创建后，它们自动重连到上一个加载器的游标，所以不必重新查询数据。 <span style="font-family:微软雅黑,sans-serif">
PS<span style="color:#FF0000"><span style="font-family:微软雅黑,sans-serif">：</span>估计这是最适合我们的一点。</span></span></font></p>
</li></ul>
<p><br>
</p>
<p><span style="font-family:微软雅黑,sans-serif; font-size:18px; color:#FF0000"><span style="font-family:微软雅黑,sans-serif"><span style="font-family:微软雅黑,sans-serif">简单</span></span></span><span style="font-size:18px; color:#FF0000">点说：就是安卓官方不允许耗时操作在UI线程（主线程）操作，所以他就出现了，看到游标（cursor）
 我就想到内容提供者，同时就想到异步.....我估计就是异步加载本地数据。</span></p>
<p><br>
</p>
<p><span style="font-size:24px">主要的类</span></p>
<p><span style="font-family:'Times New Roman',serif; font-size:18px; color:#FF0000">1.LoaderManager</span>：一看就知道是管理装载器，一般和<span style="font-family:'Times New Roman',serif">CursorLoader</span><span lang="zh-CN"></span>一起用 初始化装载器，一个activity只能有一个装载器 他可以无数个。</p>
<p><br>
</p>
<p><span style="font-family:'Times New Roman',serif; font-size:18px; color:#FF0000">2.CursorLoader</span>：其实我早就觉得他跟异步有勾结 淫荡两人组，果然不错，</p>
<p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<table border="1" cellpadding="1" cellspacing="1" height="110" width="896">
<tbody>
<tr>
<td>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-family:'Times New Roman',serif; font-size:18px; color:#CC0000">AsyncTaskLoader</span><span style="font-size:18px"><span lang="zh-CN">的子类，它查询</span><span style="font-family:'Times New Roman',serif; color:#CC0000">ContentResolver</span><span lang="zh-CN">然后返回一个</span><span style="font-family:'Times New Roman',serif; color:#990000">Cursor</span><span lang="zh-CN">。这个类为查询</span><span style="font-family:'Times New Roman',serif">cursor</span><span lang="zh-CN">以标准的方式实现了装载器的协议，它的游标查询是通过</span><span style="font-family:'Times New Roman',serif">AsyncTaskLoader</span><span lang="zh-CN">在后台线程中执行，从而不会阻塞界面。使用这个装载器是从一个</span><span style="font-family:'Times New Roman',serif">ContentProvider</span><span lang="zh-CN">异步加载数据的最好方式。相比之下，通过</span><span style="font-family:'Times New Roman',serif">fragment</span><span lang="zh-CN">或</span><span style="font-family:'Times New Roman',serif">activity</span><span lang="zh-CN">的</span><span style="font-family:'Times New Roman',serif">API</span><span lang="zh-CN">来执行一个被管理的查询就不行了。</span></span></p>
</td>
</tr>
</tbody>
</table>
<br>
<span lang="zh-CN"></span></p>
<span style="font-size:18px">3.<span style="font-family:'Times New Roman',serif">AsyncTaskLoader</span></span>&nbsp;&nbsp;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-size:18px; color:#FF0000"><span lang="zh-CN">提供一个</span><span style="font-family:'Times New Roman',serif">AsyncTask</span><span lang="zh-CN">来执行异步加载工作的抽象类。</span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<br>
<span style="font-size:18px; color:#FF0000"><span lang="zh-CN"></span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-size:18px; color:#FF0000"><span lang="zh-CN">4.<span style="font-family:'Times New Roman',serif">Loader</span>（装载器）</span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-size:18px; color:#FF0000"><br>
<span lang="zh-CN"></span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个执行异步数据加载的<span style="color:#000000">抽象类</span>。它是加载器的<span style="color:#000000">基类</span>。你可以使用典型的</span><span style="font-family:'Times New Roman',serif">CursorLoader</span><span lang="zh-CN">，但是你也可以实现你自己的子类。一旦装载器被激活，它们将监视它们的数据源并且在数据改变时发送新的结果。</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-size:18px; color:#FF0000"><span lang="zh-CN">5.<span style="font-family:'Times New Roman',serif">LoaderManager.LoaderCallbacks</span></span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span style="font-size:18px; color:#FF0000"><span lang="zh-CN"></span></span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个用于客户端与</span><span style="font-family:'Times New Roman',serif">LoaderManager</span><span lang="zh-CN">交互的<span style="color:#000000">回调接口</span>。例如，你使用回调方法</span><span style="font-family:'Times New Roman',serif">onCreateLoader()</span><span lang="zh-CN">来创建一个新的装载器。</span></p>
<br>
<p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN">一个使用装载器的应用会典型的包含如下组件：</span></p>
<ul style="font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个</span><span style="font-family:'Times New Roman',serif">Activity</span><span lang="zh-CN">或</span><span style="font-family:'Times New Roman',serif">Fragment</span><span lang="zh-CN">．</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个</span><span style="font-family:'Times New Roman',serif">LoaderManager</span><span lang="zh-CN">的实例．</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个加载被</span><span style="font-family:'Times New Roman',serif">ContentProvider</span><span lang="zh-CN">所支持的数据的</span><span style="font-family:'Times New Roman',serif">CursorLoader</span><span lang="zh-CN">．或者，你可以从</span><span style="font-family:'Times New Roman',serif">Loader</span><span lang="zh-CN">或</span><span style="font-family:'Times New Roman',serif">AsyncTaskLoader</span><span lang="zh-CN">实现你自己的装载器来从其它源加载数据．</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个</span><span style="font-family:'Times New Roman',serif">LoaderManager.LoaderCallbacks</span><span lang="zh-CN">的实现．这是你创建新的装载器以及管理你的已有装载器的引用的地方．</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个显示装载器的数据的途径，例如使用一个</span><span style="font-family:'Times New Roman',serif">SimpleCursorAdapter</span><span lang="zh-CN">．</span></p>
</li><li>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px">
<span lang="zh-CN">一个数据源，比如当是用</span><span style="font-family:'Times New Roman',serif">CursorLoader</span><span lang="zh-CN">时，它将是一个</span><span style="font-family:'Times New Roman',serif">ContentProvider</span><span lang="zh-CN">．</span></p>
</li></ul>
<p><span style="font-size:18px">开始 介绍 怎么用吧------------------------我是淫荡的分割线-----------</span>--------------------------------------------------------------</p>
<p><br>
</p>
<p>
<h3 style="margin:0px; padding:0px; font-family:Arial; line-height:26px; text-align:left">
<span style="color:#CC0000"><strong><span lang="zh-CN">启动一个装载器</span></strong></span></h3>
<p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span style="font-family:'Times New Roman',serif">LoaderManager</span><span lang="zh-CN">管理一个</span><span style="font-family:'Times New Roman',serif">Activiry</span><span lang="zh-CN">或</span><span style="font-family:'Times New Roman',serif">Fragment</span><span lang="zh-CN">中的一个或多个装载器．但每个</span><span style="font-family:'Times New Roman',serif">activity</span><span lang="zh-CN">或</span><span style="font-family:'Times New Roman',serif">fragment</span><span lang="zh-CN">只拥有一个</span><span style="font-family:'Times New Roman',serif">LoaderManager</span><span lang="zh-CN">．</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN">你通常要在</span><span style="font-family:'Times New Roman',serif">activity</span><span lang="zh-CN">的</span><span style="font-family:'Times New Roman',serif">onCreate()</span><span lang="zh-CN">方法中或</span><span style="font-family:'Times New Roman',serif">fragment</span><span lang="zh-CN">的</span><span style="font-family:'Times New Roman',serif">onActivityCreated()</span><span lang="zh-CN">方法</span><pre name="code" class="java">    // 准备装载器．可以重连一个已经存在的也可以启动一个新的．  
    getLoaderManager().initLoader(0,null, this);  </pre>第一个参数是
 他的特征码 有了他 你才能找到他</p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN">第二个参数是：可选参数 我也不知道</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN">第三个 参数是：在哪个activity调用的，当前可用this 代替 <br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN">我就不讲基础 如果想详细了解&nbsp; 可参考&nbsp; http://blog.csdn.net/yangdeli888/article/details/7911862
<br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN"><br>
</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN"><span style="font-size:18px">SimpleCurosrAdapter 的四个参数 已经怎么使用 </span>
<br>
：</span></p>
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN"></span></p>
<p>SimpleCurosrAdapter 是一个将 Cursor 中的 columns 与在 XML 文件中定义的 TextViews 或 ImageViews 进行匹配的简易 adapter。你可以指定选择 Cursor 中的哪些 columns、用哪些 views 来显示这些 columns 、以及指定定义这些 views 的 xml 文件。&nbsp;
</p>
<p>也就是说，SimpleCursorAdapter 允许绑定一个 Cursor 的 columns 到 ListView 上，并使用自定义的 layout 显示 List中的每个项目。</p>
<p>可以使用 SimpleCursorAdapter 作为中间桥梁，将从 sqlite 数据库中查询出来的数据直接显示到 ListView 中。</p>
<p><br>
</p>
<p>
<p><strong>原型：</strong></p>
<div id="codeSnippetWrapper">
<div id="codeSnippet" style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible">
<pre style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); margin:0em; width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible"><span style="color:#0000ff">public</span> SimpleCursorAdapter(Context context, <span style="color:#0000ff">int</span> layout, Cursor c, String[] from, <span style="color:#0000ff">int</span>[] to) {</pre>
<pre style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); margin:0em; width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible">    <span style="color:#0000ff">super</span>(context, layout, c);</pre>
<pre style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); margin:0em; width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible">    mTo = to;</pre>
<pre style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); margin:0em; width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible">    mOriginalFrom = from;</pre>
<pre style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); margin:0em; width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible">    findColumns(from);</pre>
<pre style="border-style:none; text-align:left; padding:0px; line-height:12pt; background-color:rgb(242,242,242); margin:0em; width:100%; font-family:'Courier New',courier,monospace; direction:ltr; color:black; font-size:8pt; overflow:visible">}</pre>
</div>
</div>
<p><strong>参数：</strong></p>
<p><span style="color:#CC0000"><em>Context context</em>,</span> 这个与 SimpleListItemFactory 相关的 ListView 所处运行上下文（context）。也就是这个 ListView 所在的 Activity。</p>
<p><em><span style="color:#9bbb59"><span style="color:#FF0000">int layout</span>,</span></em> 显示 list item 的 布局文件。这个 layout 文件中至少要包含在 &quot;to&quot; 参数中命名的 views。</p>
<p><span style="color:#9bbb59"><em><span style="color:#FF0000">Cursor c</span>,</em></span><span style="color:#ffffff">
<span style="color:#000000">数据库的光标( Cursor )。如果 cursor 无效，则该参数可以为 null</span></span></p>
<p><span style="color:#FF0000"><em>String[] from</em>,</span> 指定 column 中的哪些列的数据将绑定（显示）到 UI 中。如果 cursor 无效， 则该参数可为 null。</p>
<p><span style="color:#FF0000"><em>int[] to</em>,</span> 指定用于显示 &quot;from&quot; 参数指定的数据列表的 views。 这些 views 必须都是 TextViews。 &quot;from&quot; 参数的前 N 个&#20540;（valus）和 &quot;to&quot; 参数的前 N 个 views 是一一对应的关系。如果 cursor 无效，则该参数可为 null。</p>
<br>
基本上基础知识大家好复习好了，我也可以开始 上代码解析了。
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">
<span lang="zh-CN"><img src="49119788486680.jpg" alt=""><br>
</span></p>
<p><br>
</p>
<p><br>
</p>
<p><pre name="code" class="java">package com.example.android16_demo6_apicursorloadersearchview;

import android.app.Activity;
import android.app.LoaderManager.LoaderCallbacks;
import android.content.ContentResolver;
import android.content.CursorLoader;
import android.content.Intent;
import android.content.Loader;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.provider.ContactsContract.Contacts;
import android.text.TextUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.SearchView.OnQueryTextListener;
import android.widget.SimpleCursorAdapter;

public class MainActivity extends Activity implements LoaderCallbacks&lt;Cursor&gt;,
		OnQueryTextListener {
	private ListView lv;
	private SimpleCursorAdapter adapter;
	private String curFilter;// 用户当前输入的搜索内容，只有在用户输入的时候才会有，应用程序刚打开的时候没有
	private Uri phoneUri;
	private Cursor cursor;// 记录当前ListView中展示的数据

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		lv = (ListView) findViewById(R.id.lv);
		phoneUri = Phone.CONTENT_URI;// 电话号码Ur
		//第一个参数 当使用的activity名字
		//第二个参数  要绑定数据的布局
		//第三个参数 游标没有可以设置为空 
		//第四个参数 指定 column 中的哪些列的数据将绑定（显示）到 UI 中
		//第五个参数就是要绑定到UI界面的那个组件
		
		adapter = new SimpleCursorAdapter(MainActivity.this,
				android.R.layout.simple_list_item_2, null, new String[] {
						Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS },
				new int[] { android.R.id.text1, android.R.id.text2 });
		lv.setAdapter(adapter);
		// 点击item，打电话：权限
		lv.setOnItemClickListener(new OnItemClickListener() {

			@Override
			public void onItemClick(AdapterView&lt;?&gt; parent, View view,
					int position, long id) {
				// 点击到某个item的时候，从cursor取出该item的数据
				cursor.moveToPosition(position);
				//拿出来id，因为要通过id查电话号码
				String idd = cursor.getString(cursor
						.getColumnIndex(Contacts._ID));

				ContentResolver resolver = getContentResolver();
				//电话号码相关信息都在Phone中
				Cursor cursor2 = resolver.query(phoneUri, new String[] { Phone.DATA1 },
						Phone.CONTACT_ID + &quot;=?&quot;, new String[] { idd }, null);
				if(cursor2.moveToNext()){
					//取出电话号码
					String num = cursor2.getString(cursor2.getColumnIndex(Phone.DATA1));
					System.out.println(&quot;==num===&quot;+num);
					//打电话：权限
					Intent intent=new Intent();
					intent.setAction(Intent.ACTION_CALL);
					intent.setData(Uri.parse(&quot;tel://&quot;+num));
					startActivity(intent);
				}
			}
		});

		getLoaderManager().initLoader(1, null, this);
	}

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		MenuItem item = menu.add(&quot;search&quot;);
		item.setIcon(android.R.drawable.ic_menu_search);

		item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

		SearchView sv = new SearchView(MainActivity.this);
		sv.setOnQueryTextListener(this);

		item.setActionView(sv);
		return true;
	}

	@Override
	public Loader&lt;Cursor&gt; onCreateLoader(int id, Bundle args) {
		Uri uri;
		if (curFilter != null) {
			uri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI,
					Uri.encode(curFilter));
		} else {
			uri = Contacts.CONTENT_URI;
		}
		// 记录的是要查询的列
		String[] projection = new String[] { Contacts._ID,
				Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS,
				Contacts.CONTACT_PRESENCE, Contacts.PHOTO_ID,
				Contacts.LOOKUP_KEY, };
		// 查询条件：
		String selection = &quot;((&quot; + Contacts.DISPLAY_NAME + &quot; NOTNULL) AND (&quot;
				+ Contacts.HAS_PHONE_NUMBER + &quot;=1) AND (&quot;
				+ Contacts.DISPLAY_NAME + &quot; != &#39;&#39; ))&quot;;
		CursorLoader loader = new CursorLoader(MainActivity.this, uri,
				projection, selection, null, Contacts.DISPLAY_NAME
						+ &quot; COLLATE LOCALIZED ASC&quot;);

		return loader;
	}

	@Override
	public void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {
		adapter.swapCursor(data);
		cursor = data;
	}

	@Override
	public void onLoaderReset(Loader&lt;Cursor&gt; loader) {
		adapter.swapCursor(null);
	}

	@Override
	public boolean onQueryTextSubmit(String query) {
		return true;
	}

	@Override
	public boolean onQueryTextChange(String newText) {
		curFilter = TextUtils.isEmpty(newText) ? null : newText;
		// 输入内容改变过程中，动态刷新ListVIew
		getLoaderManager().restartLoader(1, null, this);

		return true;
	}

}
</pre><br>
<br>
</p>
<br>
<span id="pv-float-bar-container" style="top:2215px; left:0px"><span title="查看原始" class="pv-float-bar-button pv-float-bar-button-actual" style=""></span><span title="查看当前" class="pv-float-bar-button pv-float-bar-button-current"></span><span title="放大镜" class="pv-float-bar-button pv-float-bar-button-magnifier" style=""></span><span title="查看库" class="pv-float-bar-button pv-float-bar-button-gallery"></span></span>

</div>
                </div>

                <div class='span3 sidebar'>
                    <h2>导航栏</h2>
                    <ul class="nav nav-tabs nav-stacked">
                             				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/AndroidhqpmfbljDisplayMetricsjj/index.html">Android获取屏幕分辨率及DisplayMetrics简介</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/ContentProvderfxzyxqsq/index.html">ContentProvder复习之一相亲神器</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/Day13cjhccSQLitesjkcc/index.html">Day13持久化存储——SQLite数据库存储</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/Day13cjhccSQLitesjkcc(zsg)/index.html">Day13持久化存储——SQLite数据库存储(增删改)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/Day13cjhccSQLitesjkccsycontentValuefz/index.html">Day13持久化存储——SQLite数据库存储（使用contentValue封装）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/day13sjkdsx/index.html">day13数据库的思想</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/Hanldexxcljzdfxwltpxz/index.html">Hanlde消息处理机制的复习——网络图片下载</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/Loaderybzzfxjdbtxlzs/index.html">Loader异步装载复习——简答版通讯录助手</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/WebViewzzdylq1/index.html">WebView之自定义浏览器（1）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/cjavaeezxljsqlite/index.html">从javaee重新理解sqlite</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/nrtgzfxdxbf/index.html">内容提供者复习——短信备份</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/nrgczfxjtdxdemo/index.html">内容观察者复习监听短信demo</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/az(1)jnzmsyxlsx/index.html">安卓(1)教你怎么使用下拉刷新</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/azsdzjfxjtdxe/index.html">安卓四大组件复习监听短信（二）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/azsdzjfxzdygbs/index.html">安卓四大组件复习自定义广播（三）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/azsdzjdfxsxIPbhDemo/index.html">安卓四大组件的复习——实现IP拨号Demo</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/azsdzjdfxqtdh(s)/index.html">安卓四大组件的复习——窃听电话(四)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/azfxjcxsglxt/index.html">安卓复习基础学生管理系统</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/azjnsyIXListViewslgdxlsx(2)/index.html">安卓教你使用IXListView上拉更多，下拉刷新(2)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/khdyfwqddjhscwj/index.html">客户端与服务器端的交互——上传文件</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/khdyfwqddjlzjdsxasynchttpjdb/index.html">客户端与服务器端的交流——自己动手写asynchttp简单版</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/mhndbtlActionBar1tjansy/index.html">美化你的标题栏—ActionBar（1）添加按钮使用</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfwxzjmbsyrhkj/index.html">高仿威信主界面，不使用任何框架</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjcjrwlsj7/index.html">高仿新闻教程——加入网络数据（7）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjctjbuttonsxjzgdsj(9)/index.html">高仿新闻教程——添加button实现加载更多数据(9)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjcdjtmgxlistview(8)/index.html">高仿新闻教程——点击条目更新listview(8)</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjcqqwlsjjrxwnry11/index.html">高仿新闻教程——请求网络数据加入新闻内容页（11）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjcxwnrUIdyh5/index.html">高仿新闻教程—新闻内容UI的优化（5）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjczybgxsj10/index.html">高仿新闻教程之异步更新数据（10）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjchfnrjmdjr6/index.html">高仿新闻教程回复内容界面的加入（6）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjckykjdjdsxwyxwdbtly/index.html">高仿新闻教程开源框架的简单实现——网易新闻的标题栏（一）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjcxwItemdbjfx3/index.html">高仿新闻教程新闻Item的布局复习（3）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/gfxwjcxwnrdbj4/index.html">高仿新闻教程新闻内容的编辑（4）</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/hmdzListviewdyh/index.html">黑名单之Listview的优化</a></li>
    				          				<li><a href="http://songboriceboy.github.io/NReadability/html/azjcdhg/hmdljzSQLitedyf/index.html">黑名单拦截之SQLite的用法</a></li>
    				                                         
                    </ul>
                </div>
            </div>

        </div>
    </body>
</html>